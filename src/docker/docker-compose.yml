version: '2'
services:
  zookeeper:
    container_name: zookeeper
    image: wurstmeister/zookeeper
    ports:
      - 2181:2181

  kafka:
    container_name: kafka
    image: wurstmeister/kafka
    hostname: kafka
    ports:
      - 9092:9092
    environment:
      KAFKA_ADVERTISED_HOST_NAME: kafka
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_CREATE_TOPICS: "co-topic:1:1,so-topic:1:1,oz-topic:1:1,no-topic:1:1"
    depends_on:
      - zookeeper

  zeppelin:
    build: ./zeppelin/
    image: anchormen/zeppelin
    container_name: zeppelin
    environment:
      ZEPPELIN_PORT: 8090
      ZEPPELIN_JAVA_OPTS: >-
        -Dspark.driver.memory=1g
        -Dspark.executor.memory=2g
      MASTER: "local[*]"
    ports:
      - 8090:8090
    links:
      - kafka
    volumes:
      - ./zeppelin/data:/zeppelin/data
      - ./zeppelin/notebook:/zeppelin/notebook
      - ./zeppelin/logs:/zeppelin/logs
